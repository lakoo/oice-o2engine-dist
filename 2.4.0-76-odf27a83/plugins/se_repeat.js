"use strict";!function(){Tag.actions.playse.rules.o2_repeat={type:"INT"},Tag.actions.playse.rules.o2_repeat_delay={type:"TIME",defaultValue:0};var e=Tag.actions.playse.action;Tag.actions.playse.action=function(t){t.loop&&("o2_repeat"in t&&o2.warn("loop=trueですからo2_repeatは無視されます。"),t.o2_repeat=1/0);var a=e.apply(this,arguments);if(!("o2_repeat"in t))return a;if(t.o2_repeat<=0)return this.warn("o2_repeatは0以上の数字じゃないとダメです"),a;var o=0,r=o2.se[t.buf];if(!r.loadDefer)return a;r.loadDefer.done(function(e){$(e).off(),$(e).one("ended",function a(){o++,o===t.o2_repeat?(r.stop(),$(r).trigger("ended"),delete r.stop):setTimeout(function(){o!==t.o2_repeat&&($(e).one("ended",a),e.currentTime=0,e.play())},t.o2_repeat_delay)})});var n=r.stop;return r.stop=function(){var e=n.apply(this,arguments);return o=t.o2_repeat,delete r.stop,e},a}}();