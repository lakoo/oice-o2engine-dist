"use strict";!function(){Tag.actions.playse.rules.o2_repeat={type:"INT"},Tag.actions.playse.rules.o2_repeat_delay={type:"TIME",defaultValue:0};var e=Tag.actions.playse.action;Tag.actions.playse.action=function(t){t.loop&&("o2_repeat"in t&&o2.warn("loop=trueですからo2_repeatは無視されます。"),t.o2_repeat=1/0);var o=e.apply(this,arguments);if(!("o2_repeat"in t))return o;if(t.o2_repeat<=0)return this.warn("o2_repeatは0以上の数字じゃないとダメです"),o;var a=0,r=o2.se[t.buf];if(!r.loadDefer)return o;r.loadDefer.done(function(e){$(e).off(),$(e).one("ended",function o(){a++,a===t.o2_repeat?(r.stop(),$(r).trigger("ended"),delete r.stop):setTimeout(function(){a!==t.o2_repeat&&($(e).one("ended",o),e.currentTime=0,e.play())},t.o2_repeat_delay)})});var n=r.stop;return r.stop=function(){n.apply(this,arguments),a=t.o2_repeat,delete r.stop},o}}();